@if (mode$ | async; as mode) {
  <div class="controls-panel">
    <div class="button-group">
      <button 
        [class.active]="mode === 'draw'"
        (click)="setMode('draw')">
        Draw Map
      </button>
      
      <button 
        [class.active]="mode === 'erase'"
        (click)="setMode('erase')">
        Eraser
      </button>
      
      <button 
        [class.active]="mode === 'set_points'"
        (click)="setMode('set_points')">
        Set Points
      </button>
      
      <button 
        [class.active]="mode === 'find_path'"
        (click)="findPath()">
        Find Path
      </button>
      
      <button 
        (click)="replayAnimation()">
        Replay
      </button>

      &nbsp;&nbsp;&nbsp;&nbsp;
      
      
      <label class="checkbox-label">
        <input 
          type="checkbox" 
          [checked]="(optimizeOrder$ | async) || false"
          (change)="toggleOptimizeOrder()">
        Optimize Waypoint Order
      </label>
      
      <button 
        class="clear-btn"
        (click)="clearWaypoints()">
        Clear Waypoints
      </button>
    </div>
    
    <div class="options">
      
    </div>
  </div>
}
