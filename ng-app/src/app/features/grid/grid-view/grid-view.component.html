<div class="grid-container">
  <app-controls-panel></app-controls-panel>

  @if (grid$ | async; as grid) {
    <div class="grid-canvas" (mouseup)="onMouseUp($event)" (mouseleave)="onMouseUp($event)">
      <table>
        <tbody>
          @for (row of grid; track $index; let y = $index) {
            <tr>
              @for (cell of row; track $index; let x = $index) {
                <td
                  [ngClass]="getCellClass(cell, y, x, (waypoints$ | async) || [], (path$ | async))"
                  (mousedown)="onCellClick(y, x, $event)"
                  (mouseenter)="onCellMouseEnter(y, x, $event)"
                  (contextmenu)="$event.preventDefault()">
                </td>
              }
            </tr>
          }
        </tbody>
      </table>
    </div>
  } @else {
    <div>Loading grid...</div>
  }
</div>
